<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard Dev</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h2>Meus Projetos</h2>

<input id="nome" placeholder="Nome">
<input id="desc" placeholder="Descrição">
<input id="tech" placeholder="Tech">
<input id="contato" placeholder="Contato">
<button onclick="add()">Adicionar</button>

<div id="lista"></div>

<script>
const sb=supabase.createClient(
'https://ynirlpziolginasusolb.supabase.co',
'sb_publishable_1cX1yB_sA5aAodDbArwrCw_J6OxoK3l'
);

const dev=localStorage.getItem('dev');
if(!dev)location.href='login.html';

async function load(){
const {data}=await sb.from('projetos').select('*').eq('usuario_id',dev);
lista.innerHTML=data.map(p=>`
<p>${p.nome} <button onclick="del(${p.id})">X</button></p>
`).join('');
}
async function add(){
await sb.from('projetos').insert({
usuario_id:dev,nome:nome.value,descricao:desc.value,tech:tech.value,contato:contato.value
});
load();
}
async function del(id){
await sb.from('projetos').delete().eq('id',id);
load();
}
load();
</script>
</body>
</html>
