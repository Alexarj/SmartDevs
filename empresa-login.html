<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Empresa</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h2>Empresa</h2>
<input id="email" placeholder="Email">
<input id="senha" type="password" placeholder="Senha">

<label>
<input type="checkbox" id="termo">
Aceito os <a href="termos.html" target="_blank">Termos</a>
</label>

<button onclick="login()">Entrar</button>
<button onclick="cadastrar()">Cadastrar</button>

<script>
const sb=supabase.createClient(
'https://ynirlpziolginasusolb.supabase.co',
'sb_publishable_1cX1yB_sA5aAodDbArwrCw_J6OxoK3l'
);

async function login(){
const {data}=await sb.from('empresas')
.select('*')
.eq('email',email.value)
.eq('senha',senha.value)
.single();
if(!data)return alert('Erro');
localStorage.setItem('empresa',data.id);
location.href='empresa-dashboard.html';
}

async function cadastrar(){
if(!termo.checked)return alert('Aceite os termos');
await sb.from('empresas').insert({
email:email.value,senha:senha.value,nome:prompt('Empresa')
});
alert('Cadastro ok');
}
</script>
</body>
</html>
